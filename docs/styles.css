:root{--bg:#111;--ink:#e6e6e6;--muted:#9a9a9a;--line:#2a2a2a;--accent:#cfcfcf}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--ink);font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Arial,sans-serif}
header{padding:2rem 1rem 1rem;border-bottom:1px solid var(--line);position:sticky;top:0;backdrop-filter:saturate(.7) blur(6px);background:rgba(17,17,17,.75)}
h1{margin:0 0 .25rem;letter-spacing:.02em;font-weight:600;color:var(--accent)}
.subtitle{margin:0 0 1rem;font-size:.95rem;color:var(--muted);letter-spacing:.01em;line-height:1.4}
.controls{display:flex;gap:.75rem;align-items:center}
#q{flex:1;padding:.75rem 1rem;border:1px solid var(--line);background:#0b0b0b;color:var(--ink);border-radius:8px;outline:none;transition:border-color .2s ease}
#q:focus{border-color:#666}
#count{color:var(--muted);font-size:.9rem}
main{padding:1rem;display:grid;grid-template-columns:repeat(auto-fit,minmax(320px,1fr));gap:1rem}
.card{border:1px solid var(--line);border-radius:12px;padding:1rem;background:linear-gradient(180deg,#141414,#101010);transition:transform .15s ease,border-color .15s ease,background-color .15s ease;position:relative;overflow:hidden}
.card.shade-1{background:linear-gradient(180deg,#1a1a1a,#492d2d)}
.card.shade-2{background:linear-gradient(180deg,#171717,#202617)}
.card.shade-3{background:linear-gradient(180deg,#141414,#29262e)}
.card.shade-4{background:linear-gradient(180deg,#111111,#2b222e)}
.card.shade-5{background:linear-gradient(180deg,#0e0e0e,#1a243d)}
.card:hover{transform:translateY(-2px);border-color:#444}
.card:active{transform:translateY(0)}
.title{font-weight:600;margin:0 0 .5rem}
.card.shade-1 .title{color:#f2b2b2}
.card.shade-2 .title{color:#e2fbbe}
.card.shade-3 .title{color:#e3d4ff}
.card.shade-4 .title{color:#ebd5f2}
.card.shade-5 .title{color:#99b6ff}
.meta{font-size:.85rem;color:var(--muted);display:flex;gap:.5rem;flex-wrap:wrap}
.desc{margin:.75rem 0 0}
.row{display:flex;justify-content:space-between;align-items:center;gap:.75rem}
.source{text-decoration:none;color:#8f8f8f;border-bottom:1px dotted #444}
footer{border-top:1px solid var(--line);color:var(--muted);padding:1rem;text-align:center}
@media (hover:hover) and (pointer:fine){
  .card.shade-1{background:radial-gradient(300px 180px at var(--mx,50%) var(--my,50%),#2a1e1e 0%,#492d2d 70%)}
  .card.shade-2{background:radial-gradient(300px 180px at var(--mx,50%) var(--my,50%),#1e211a 0%,#202617 70%)}
  .card.shade-3{background:radial-gradient(300px 180px at var(--mx,50%) var(--my,50%),#1a1820 0%,#29262e 70%)}
  .card.shade-4{background:radial-gradient(300px 180px at var(--mx,50%) var(--my,50%),#1a151e 0%,#2b222e 70%)}
  .card.shade-5{background:radial-gradient(300px 180px at var(--mx,50%) var(--my,50%),#141b2e 0%,#1a243d 70%)}
}

/* Cards with background images */
.card.has-background{filter:grayscale(100%);background-repeat:no-repeat;cursor:pointer}
.card.has-background:hover{filter:grayscale(80%)}
.card.has-background .content-wrapper{background:linear-gradient(to bottom,rgba(0,0,0,0.7),rgba(0,0,0,0.8));padding:1rem;border-radius:10px;backdrop-filter:blur(2px)}
.card.has-background .title{color:#fff;text-shadow:1px 1px 2px rgba(0,0,0,0.8)}
.card.has-background .desc{color:#e6e6e6;text-shadow:1px 1px 1px rgba(0,0,0,0.6)}
.card.has-background .meta{color:#b0b0b0}

/* Location page styles */
.action-links {
  display: flex;
  flex-direction: column;
  gap: 1rem;
  margin-top: 2rem;
}
.action-link {
  padding: 1rem;
  border: 1px solid var(--line);
  border-radius: 8px;
  text-decoration: none;
  color: var(--muted);
  transition: all 0.3s;
  position: relative;
  overflow: hidden;
}
.action-link:hover {
  color: var(--ink);
  border-color: var(--muted);
  padding-left: 2rem;
}
.action-link::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 3px;
  background: var(--accent);
  transform: translateX(-100%);
  transition: transform 0.3s;
}
.action-link:hover::before {
  transform: translateX(0);
}

/* Edit button styles */
.edit-btn{position:absolute;bottom:1rem;right:1rem;background:transparent;border:none;cursor:pointer;opacity:0.5;font-size:1.2rem;padding:0.25rem;transition:opacity 0.2s;z-index:10}
.edit-btn:hover{opacity:0.8}

/* Media thumbnails */
.media-thumbnails{display:flex;gap:0.5rem;margin-top:0.75rem;flex-wrap:wrap}
.media-thumb{width:60px;height:60px;border-radius:4px;overflow:hidden;cursor:pointer;position:relative;background:#1a1a1a;display:flex;align-items:center;justify-content:center;transition:transform 0.2s}
.media-thumb:hover{transform:scale(1.05)}
.media-thumb img{width:100%;height:100%;object-fit:cover;filter:grayscale(100%)}
.audio-thumb{font-size:1.5rem;opacity:0.7}
.media-badge{position:absolute;bottom:2px;right:2px;background:rgba(0,0,0,0.7);color:white;padding:2px 4px;border-radius:2px;font-size:0.7rem}

/* Modal styles */
.modal{display:none;position:fixed;z-index:1000;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.8);align-items:center;justify-content:center}
.modal-content{background:#1a1a1a;border-radius:12px;width:90%;max-width:600px;max-height:90vh;overflow-y:auto;border:1px solid var(--line)}
.modal-header{padding:1.5rem;border-bottom:1px solid var(--line);display:flex;justify-content:space-between;align-items:center}
.modal-header h2{margin:0;color:var(--accent)}
.modal-close{background:transparent;border:none;color:var(--muted);font-size:1.5rem;cursor:pointer;padding:0;width:2rem;height:2rem}
.modal-close:hover{color:var(--ink)}
.modal-body{padding:1.5rem}
.auth-section{text-align:center}
.auth-section label{display:block;margin-bottom:0.5rem;color:var(--ink)}
.auth-section input{width:100%;max-width:300px;padding:0.75rem;background:#0b0b0b;border:1px solid var(--line);color:var(--ink);border-radius:6px;margin-bottom:1rem}
#authButton{padding:0.75rem 2rem;background:#2a2a2a;color:var(--ink);border:none;border-radius:6px;cursor:pointer;transition:background 0.2s}
#authButton:hover{background:#3a3a3a}
.error-message{color:#ff6b6b;margin-top:0.5rem;font-size:0.9rem;line-height:1.4}
.auth-help{margin-top:1rem;color:var(--muted);line-height:1.6;text-align:left;max-width:400px;margin-left:auto;margin-right:auto}
.auth-help a{color:var(--accent);text-decoration:none}
.auth-help a:hover{text-decoration:underline}
.auth-help strong{color:var(--ink)}
.form-group{margin-bottom:1.5rem}
.form-group label{display:block;margin-bottom:0.5rem;color:var(--ink)}
.edit-input,.edit-textarea{width:100%;padding:0.75rem;background:#0b0b0b;border:1px solid var(--line);color:var(--ink);border-radius:6px;font-family:inherit}
.edit-textarea{resize:vertical}
.drop-zone{border:2px dashed var(--line);border-radius:8px;padding:2rem;text-align:center;cursor:pointer;transition:all 0.3s;background:#0b0b0b}
.drop-zone:hover,.drop-zone.drag-over{border-color:#666;background:#141414}
.drop-zone p{color:var(--muted);margin:0}
.media-preview{display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:0.75rem;margin-top:1rem}
.preview-item{position:relative;border-radius:6px;overflow:hidden;background:#0b0b0b;aspect-ratio:1}
.preview-item img,.preview-item video{width:100%;height:100%;object-fit:cover}
.preview-item .audio-icon{font-size:2rem;display:flex;align-items:center;justify-content:center;height:100%}
.preview-item .remove-media{position:absolute;top:4px;right:4px;background:rgba(0,0,0,0.7);color:white;border:none;border-radius:50%;width:24px;height:24px;cursor:pointer;display:flex;align-items:center;justify-content:center}
.preview-item .remove-media:hover{background:rgba(255,0,0,0.7)}
.preview-item .media-type{position:absolute;bottom:4px;left:4px;background:rgba(0,0,0,0.7);color:white;padding:2px 6px;border-radius:3px;font-size:0.7rem}
.preview-item.existing{border:2px solid #2a2a2a}
.preview-item.new{border:2px solid #4a4a4a}
.background-check{position:absolute;top:4px;left:4px;background:rgba(0,0,0,0.8);border-radius:4px;padding:2px 4px;cursor:pointer;display:flex;align-items:center;gap:4px}
.background-check input{display:none}
.background-check .bg-icon{font-size:1rem;opacity:0.5;transition:opacity 0.2s}
.background-check input:checked+.bg-icon{opacity:1;filter:drop-shadow(0 0 3px #fff)}
.modal-footer{display:flex;gap:1rem;justify-content:flex-end;padding-top:1rem;border-top:1px solid var(--line)}
.btn-save,.btn-cancel{padding:0.75rem 1.5rem;border:none;border-radius:6px;cursor:pointer;transition:background 0.2s}
.btn-save{background:#2d5a2d;color:white}
.btn-save:hover{background:#3a6a3a}
.btn-cancel{background:#2a2a2a;color:var(--ink)}
.btn-cancel:hover{background:#3a3a3a}
.upload-progress{width:100%;margin-top:1rem}
.progress-bar{width:100%;height:6px;background:#1a1a1a;border-radius:3px;overflow:hidden}
.progress-fill{height:100%;background:#4a7c4a;transition:width 0.3s;border-radius:3px}
.progress-text{display:block;text-align:center;color:var(--muted);font-size:0.9rem;margin-top:0.5rem}

/* Media viewer styles */
.media-viewer{display:none;position:fixed;z-index:2000;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.95);align-items:center;justify-content:center}
.viewer-content{position:relative;width:90%;height:90%;display:flex;flex-direction:column;align-items:center;justify-content:center}
.viewer-close{position:absolute;top:20px;right:20px;background:transparent;border:none;color:white;font-size:2rem;cursor:pointer;z-index:2001;padding:0.5rem}
.viewer-close:hover{color:#ccc}
.viewer-prev,.viewer-next{position:absolute;top:50%;transform:translateY(-50%);background:rgba(255,255,255,0.1);border:none;color:white;font-size:3rem;cursor:pointer;padding:1rem;border-radius:6px;transition:background 0.2s}
.viewer-prev:hover,.viewer-next:hover{background:rgba(255,255,255,0.2)}
.viewer-prev{left:20px}
.viewer-next{right:20px}
.viewer-prev:disabled,.viewer-next:disabled{opacity:0.3;cursor:not-allowed}
.viewer-main{max-width:100%;max-height:80%;display:flex;align-items:center;justify-content:center}
.viewer-main img{max-width:100%;max-height:100%;object-fit:contain}
.viewer-main video{max-width:100%;max-height:100%}
.audio-player{text-align:center;color:white}
.audio-icon-large{font-size:4rem;margin-bottom:2rem}
.audio-player audio{width:300px;margin:1rem 0}
.audio-player p{color:#ccc;margin-top:1rem}
.viewer-info{position:absolute;bottom:20px;left:50%;transform:translateX(-50%);text-align:center;color:white}
.viewer-info span{display:block;margin:0.25rem 0}
#viewerTitle{font-size:1.1rem}
#viewerCounter{color:#aaa;font-size:0.9rem}

/* Card expand modal styles */
.card-expand-modal{display:none;position:fixed;z-index:1500;left:0;top:0;width:100%;height:100%;background:rgba(0,0,0,0.9);align-items:center;justify-content:center}
.expand-content{width:90%;height:85%;max-width:1400px;display:flex;flex-direction:column;position:relative}
.expand-close{position:absolute;top:-40px;right:0;background:transparent;border:none;color:white;font-size:2.5rem;cursor:pointer;z-index:1501;padding:0}
.expand-close:hover{color:#ccc}
.expand-layout{display:flex;height:100%;gap:2rem;background:#111;border-radius:12px;overflow:hidden}
.expand-image-side{flex:1.5;display:flex;align-items:center;justify-content:center;background:#000;position:relative}
.expand-image-side img{max-width:100%;max-height:100%;object-fit:contain}
.expand-text-side{flex:1;padding:2rem;overflow-y:auto;background:rgba(0,0,0,0.85);backdrop-filter:blur(10px)}
.expand-text-wrapper h2{color:#fff;margin:0 0 1rem;font-size:1.8rem;line-height:1.3}
.expand-meta{color:#999;font-size:0.9rem;margin-bottom:1.5rem;display:flex;gap:1rem;flex-wrap:wrap}
.expand-meta a{color:#8f8f8f;text-decoration:none;border-bottom:1px dotted #444}
.expand-text-wrapper p{color:#e6e6e6;line-height:1.7;font-size:1.05rem;margin:0 0 1.5rem}
.expand-thumbnails{display:flex;gap:0.75rem;flex-wrap:wrap;margin-top:2rem;padding-top:2rem;border-top:1px solid #333}
.expand-thumb{width:80px;height:80px;border-radius:6px;overflow:hidden;cursor:pointer;background:#1a1a1a;display:flex;align-items:center;justify-content:center;transition:transform 0.2s;border:2px solid transparent}
.expand-thumb:hover{transform:scale(1.05);border-color:#444}
.expand-thumb img{width:100%;height:100%;object-fit:cover}

/* Responsive styles for card expand modal */
@media (max-width: 768px) {
  .expand-layout{flex-direction:column;gap:0}
  .expand-image-side{flex:none;height:40vh}
  .expand-text-side{flex:none;height:60vh}
  .expand-close{top:10px;right:10px;font-size:2rem;background:rgba(0,0,0,0.5);width:40px;height:40px;border-radius:50%;display:flex;align-items:center;justify-content:center}
}
